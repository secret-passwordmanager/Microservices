<!doctype html>
<html>
  <head>
    <title>Untrusted</title>
  </head>
  <body>
      <input type="text" name="untrustedJWT" value="untrustedJWT" id="jwt">
      <button id="connect">Connect</button>
     <input type="text" name="token" value="fdsadsfdsnvdsanjkdvsnakdnsakvdsa" id="credToken">
     <input type="text" name="domain" value="google.com" id="credDomain">
     <input type="text" name="authId" value="1568" id="credAuthId">
     <select name="type" id="credType" id="credType">
        <option value ="password">
           Password
        </option>
        <option value="username">
         Username
        </option>
     </select>
   <button id="newSwapBtn">New Swap</button>


    <script src="/socket.io/socket.io.js"></script>
    <script>
   
      
      document.getElementById('connect').addEventListener("click", () => {
         var socket= io.connect('/Untrusted', {
            query: { 'jwt': document.getElementById('jwt').value}
         });

         socket.on('connection', (error) => {
         console.log('connected')
      });

      socket.on('connectionNew', (role) => {
         console.log('New ' + role + 'device has connected');
      });

      socket.on('connectionDisconnect', () => {
         console.log('Trusted device disconnected');
      });

      socket.on('err', (error) => {
         console.log('There was  a problem: \n');
         console.log(error);
      });



      document.getElementById('newSwapBtn').addEventListener("click", () => {
         socket.emit('swapNew', {
            'domain': document.getElementById('credDomain').value,
            'token': document.getElementById('credToken').value,
            'authId': document.getElementById('credAuthId').value,
            'type': document.getElementById('credType').value
         });
      });
      });


     



    </script>

  </body>
</html>