<!doctype html>
<html>
  <head>
    <title>Untrusted</title>
  </head>
  <body>
     <input type="text" name="token" value="abcderf" id="credToken">
     <input type="text" name="domain" value="google.com" id="credDomain">
     <input type="text" name="authId" value="1568" id="credAuthId">
     <select name="type" id="credType" id="credType">
        <option value ="password">
           Password
        </option>
        <option value="username">
         Username
        </option>
     </select>
   <button id="newSwapBtn">New Swap</button>


    <script src="/socket.io/socket.io.js"></script>
    <script>
      let jwt = 'eyJhbGciOiJSUzI1NiIsImtpZCI6Ik9vQ3VjWEFYTXFIbWZlWnpsbzJNTTdldXIyc3ZVb3V3OVNTRUpONmZJREkifQ.eyJ1bmlxdWVfbmFtZSI6IjI3IiwicmVmcmVzaFRva2VuIjoibnYvQnMxdnFuQzJKZ0t6QVlFZ1hqL3JQanlkaXl4bHJ0aTM5c3ltS3BCaWg2QmFGMGVjS1czWWJtVlVaaWR5SWhEdzVDRXFieWNYUEplZUY1ckhhUmc9PSIsInJvbGUiOiJVbnRydXN0ZWQiLCJzdWIiOiIyNyIsImF1ZCI6IkJPVU5DRVIiLCJpc3MiOiJCT1VOQ0VSIiwiaWF0IjoxNTk4OTg3ODU2LCJleHAiOjE1OTkwMTc4NTZ9.ZPROnxuQ9e5GYxXecE5IFJW4tg8UELKA_Q87hJxX6fDM33HS1NiB7Jx6HpusMSH8RPXasrpe6zgfRFpWOZDq2dd1WeTWymjmzbuwklMUxsT9gcFriJaDUH-J9nRpdTSTk_kJXuH129iPolr0uxu4X-N6fQ6U-7uA1nBLVeMucXhfkC8Osj_DilVpKW3swbwq9_PDw1OyuH1-ThKMkab7v43dvyfJu_--FqeT3GsBjCBn3_Jdn0lYvxMvJBStDZkhyHB44xDOYtT6mo2_lJZiLJfJY8z0dyYFH6tqpoEWfkJNtaJsd0RwtnxnWW-Ohh_PSC6j1VT3YztLJy3apj0zYw';
      var socket = io.connect('/Untrusted', {
         query: { 'jwt': jwt}
      });

      socket.on('connection', (error) => {
         console.log('connected')
      });

      socket.on('connectionNew', (role) => {
         console.log('New ' + role + 'device has connected');
      });

      socket.on('connectionDisconnect', () => {
         console.log('Trusted device disconnected');
      });

      socket.on('err', (error) => {
         console.log('There was  a problem: \n');
         console.log(error);
      });

      console.log(document.getElementById('credDomain').value);

      document.getElementById('newSwapBtn').addEventListener("click", () => {
         socket.emit('swapNew', {
            'domain': document.getElementById('credDomain').value,
            'token': document.getElementById('credToken').value,
            'authId': document.getElementById('credAuthId').value,
         });
      });


    </script>

  </body>
</html>